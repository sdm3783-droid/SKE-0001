<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>SKE-0001 ì‚¬ê¸‰ìì¬ ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root { --primary: #1e40af; --bg: #f1f5f9; --warn: #dc2626; --part: #d97706; --success: #059669; }
        body { font-family: 'Pretendard', sans-serif; background: var(--bg); padding: 20px; color: #1e293b; }
        .container { max-width: 1700px; margin: auto; background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        h2 { margin-top: 0; color: var(--primary); border-left: 6px solid var(--primary); padding-left: 15px; margin-bottom: 20px; }
        .dashboard { display: flex; gap: 15px; overflow-x: auto; padding: 10px 5px; margin-bottom: 25px; border-bottom: 2px solid #f1f5f9; }
        .dash-card { min-width: 280px; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; padding: 20px; cursor: pointer; transition: 0.3s; }
        .btn { padding: 10px 15px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; transition: 0.2s; }
        
        /* ğŸš€ ì—ëŸ¬ í•´ê²°ì„ ìœ„í•œ í•µì‹¬ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .btn-parser { 
            background: #2563eb; 
            color: white; 
            padding: 12px 24px;
            box-shadow: 0 4px 6px -1px rgba(37, 99, 235, 0.4);
        }
        .btn-parser:hover { background: #1d4ed8; transform: translateY(-2px); }
    </style>
</head>
<body>

<div class="container">
    <header style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 30px;">
        <div>
            <h2>ğŸ¢ SKE-0001 ì‚¬ê¸‰ìì¬ ê´€ë¦¬ ì‹œìŠ¤í…œ <span id="syncStatus" style="font-size: 12px; color: var(--success); margin-left: 10px;">â— ë°ì´í„° ì‹¤ì‹œê°„ ì—°ê²° ì¤‘</span></h2>
            <p style="font-size: 13px; color: #64748b; margin-top: -15px; margin-left: 20px;">ë„ë©´ ë²ˆí˜¸ ë° ìì¬ ì •ë³´ ìë™ ì¶”ì¶œ í†µí•© ì‹œìŠ¤í…œ</p>
        </div>
        
        <button class="btn btn-parser" onclick="location.href='parser.html'">
            ğŸš€ AI ë„ë©´ ë¶„ì„ê¸° ì‹¤í–‰ (BOM ìë™ ì¶”ì¶œ)
        </button>
    </header>

    <div id="dashboard" class="dashboard"></div>

    <div style="background: #f8fafc; padding: 20px; border-radius: 10px; margin-bottom: 20px; border: 1px solid #e2e8f0;">
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(130px, 1fr)); gap: 10px;">
            <div class="field"><label style="font-size:11px; font-weight:bold; color:#64748b; display:block; margin-bottom:5px;">ë“±ë¡ì¼ì</label><input type="date" id="pRegDate" style="width:100%; padding:8px; border:1px solid #cbd5e1; border-radius:6px;"></div>
            <div class="field"><label style="font-size:11px; font-weight:bold; color:#64748b; display:block; margin-bottom:5px;">í”„ë¡œì íŠ¸ëª…</label><input type="text" id="pName" placeholder="í”„ë¡œì íŠ¸ëª…" style="width:100%; padding:8px; border:1px solid #cbd5e1; border-radius:6px;"></div>
            <div class="field"><label style="font-size:11px; font-weight:bold; color:#64748b; display:block; margin-bottom:5px;">ë°œì£¼ë²ˆí˜¸</label><input type="text" id="pOrder" placeholder="ë°œì£¼ë²ˆí˜¸" style="width:100%; padding:8px; border:1px solid #cbd5e1; border-radius:6px;"></div>
            <div class="field"><label style="font-size:11px; font-weight:bold; color:#64748b; display:block; margin-bottom:5px;">ì—…ì²´ëª…</label><input type="text" id="pVendor" placeholder="ì—…ì²´ëª…" style="width:100%; padding:8px; border:1px solid #cbd5e1; border-radius:6px;"></div>
            <div class="field"><label style="font-size:11px; font-weight:bold; color:#64748b; display:block; margin-bottom:5px;">ìì¬ëª…</label><input type="text" id="pItem" placeholder="ìì¬ëª…" style="width:100%; padding:8px; border:1px solid #cbd5e1; border-radius:6px;"></div>
            <div class="field"><label style="font-size:11px; font-weight:bold; color:#64748b; display:block; margin-bottom:5px;">í•„ìš”ìˆ˜ëŸ‰</label><input type="number" id="pTargetQty" value="1" style="width:100%; padding:8px; border:1px solid #cbd5e1; border-radius:6px;"></div>
            <button class="btn" style="background: var(--primary); color: white; margin-top:22px; height:40px;" onclick="addItem()">ë°ì´í„° ì €ì¥</button>
        </div>
    </div>

    <table style="width: 100%; border-collapse: collapse;">
        <thead>
            <tr style="background: #f1f5f9; color: #475569; font-size: 12px; border-bottom: 2px solid #e2e8f0;">
                <th style="padding: 12px;">ë“±ë¡ì¼ì</th>
                <th>í”„ë¡œì íŠ¸ëª…</th>
                <th>ë°œì£¼ë²ˆí˜¸</th>
                <th>ì—…ì²´ëª…</th>
                <th>ìì¬ëª…</th>
                <th>í•„ìš”</th>
                <th>ì…ê³ </th>
                <th>ìƒíƒœ</th>
                <th>ê´€ë¦¬</th>
            </tr>
        </thead>
        <tbody id="tableBody" style="text-align: center; font-size: 13px;"></tbody>
    </table>
</div>

<script>
    const DATABASE_URL = "https://ske-0001-default-rtdb.firebaseio.com/inventory.json";
    let inventory = [];

    // ì˜¤ëŠ˜ ë‚ ì§œ ê¸°ë³¸ ì„¤ì •
    document.getElementById('pRegDate').value = new Date().toISOString().split('T')[0];

    async function loadData() {
        try {
            const res = await fetch(DATABASE_URL);
            const data = await res.json();
            inventory = data ? Object.values(data) : [];
            render();
            document.getElementById('syncStatus').innerText = "â— ì‹¤ì‹œê°„ ë™ê¸°í™” ì™„ë£Œ";
        } catch (e) { 
            document.getElementById('syncStatus').innerText = "â—‹ ì˜¤í”„ë¼ì¸ ìƒíƒœ";
        }
    }

    function render() {
        const body = document.getElementById('tableBody');
        body.innerHTML = inventory.map((item, idx) => `
            <tr style="border-bottom: 1px solid #f1f5f9;">
                <td style="padding: 12px;">${item.regDate}</td>
                <td style="font-weight:bold;">${item.project}</td>
                <td>${item.order || '-'}</td>
                <td>${item.vendor}</td>
                <td>${item.item}</td>
                <td>${item.targetQty}</td>
                <td style="color:var(--primary); font-weight:bold;">${item.inQty || 0}</td>
                <td><span style="background: #dcfce7; color: #166534; padding: 3px 8px; border-radius: 10px; font-size: 11px; font-weight: bold;">ì—°ê²°ë¨</span></td>
                <td><button onclick="deleteItem(${idx})" style="color: #94a3b8; font-size: 11px; background: none; border: none; cursor: pointer;">ì‚­ì œ</button></td>
            </tr>
        `).join('');
    }

    // ì´ˆê¸° ë°ì´í„° ë¡œë“œ
    loadData();
</script>
</body>
</html>
